DocumentsTask
=============

Задание получения списка документов, находящихся в ящике организации


.. rubric:: Свойства

:FromSendDate:
    **Дата и время, чтение/запись** - начальная дата интервала отправки/получения документа

:ToSendDate:
    **Дата и время, чтение/запись** - конечная дата интервала отправки/получения документа

:FromDocumentDate:
    **Дата и время, чтение/запись** - дата документа, начальная дата интервала

:ToDocumentDate:
    **Дата и время, чтение/запись** - дата документа, конечная дата интервала. Дата приводится к коннцу дня

:Category:
    **Строка, чтение/запись** - :ref:`категория документов <DocumentsTask-Category>`

:CounteragentId:
    **Строка, чтение/запись** - идентификатор контрагента, с которым шёл документооборот

:DepartmentId:
    **Строка, чтение/запись** - идентификатор подразделения организации, из которого производится выборка документов

:FromDepartmentId:
    **Строка, чтение/запись** - идентификатор подразделения организации, из которого отправлен внутренний документ

:ToDepartmentId:
    **Строка, чтение/запись** - идентификатор подразделения организации, в которое отправлен внутренний документ

:RequireOneSDocumentId:
    **Булево, чтение/запись** - При получении документов будут также загружены дополнительные идентификаторы учётной системы. Значение ``TRUE`` замедляет получение документов

:ExcludeSubdepartments:
    **Булево, чтение/запись** - признак того, что поиск осуществляется без учёта дочерних подразделений

:Top100:
    **Булево, чтение/запись** - признак того, что нужно вернуть только первые сто документов

:DetectCustomPrintForm:
    **Булево, чтение/запись** - определять наличие кастомной формы у документов сразу.
    Рекомендуется указать ``TRUE``, если в интеграции идёт обращение к методу :meth:`DocumentBase.DetectCustomPrintForm` для полученных документов



.. rubric:: Методы

.. tabs::

    .. tab:: Все актуальные

        * :meth:`GetDocuments() <DocumentsTask.GetDocuments>`
        * :meth:`GetDocumentsAsync() <DocumentsTask.GetDocumentsAsync>`


.. method:: DocumentsTask.GetDocuments()

    Возвращает :doc:`коллекцию <Collection>` :doc:`документов <DocumentBase>` удовлетворяющих заданному фильтру


.. method:: DocumentsTask.GetDocumentsAsync()

    Асинхронно получает список документов, удовлетворяющих фиьлтру. Возвращает :doc:`AsyncResult` с результатом в виде :doc:`коллекции <Collection>` :doc:`документов <DocumentBase>`


.. rubric:: Дополнительная информация

Использовать параметры *FromSendDate*/*ToSendDate* и *FromDocumentDate*/*ToDocumentDate* одновременно нельзя


.. _DocumentsTask-Category:
.. rubric:: Правила формирования *Category*

Параметр *Category* имеет вид <:ref:`Тип <DocumentsTask-DocumentType>`>.<:ref:`Класс <DocumentsTask-DocumentClass>`><:ref:`Статус <DocumentsTask-DocumentStatus>`> (без угловых скобок)


.. _DocumentsTask-DocumentType:

=================================== =====================================================================================================================================================================================================================================================================================================
Значение *Типа документа*           Описание
=================================== =====================================================================================================================================================================================================================================================================================================
<DocumentTypeName>                  имя :doc:`типа документа <DocumentTypeDescription>`
Any                                 соответствует любому типу документа
AnyInvoiceDocumentType (устарел)    соответствует набору из четырех типов документов: ``Invoice``, ``InvoiceRevision``, ``InvoiceCorrection``, ``InvoiceCorrectionRevision``
AnyBilateralDocumentType (устарел)  соответствует любому типу двусторонних документов: ``Nonformalized``, ``Torg12``, ``AcceptanceCertificate``, ``XmlTorg12``, ``XmlAcceptanceCertificate``, ``TrustConnectionRequest``, ``PriceList``, ``PriceListAgreement``, ``CertificateRegistry``, ``ReconciliationAct``, ``Contract``, ``Torg13``
AnyUnilateralDocumentType (устарел) соответствует любому типу односторонних документов: ``ProformaInvoice``, ``ServiceDetails``
=================================== =====================================================================================================================================================================================================================================================================================================


.. _DocumentsTask-DocumentClass:

=========================== ====================================================
Значение *Класса документа* Описание
=========================== ====================================================
Inbound                     входящий документ
Outbound                    исходящий документ
Internal                    внутренний документ
Proxy                       документ, переданный через промежуточного получателя
=========================== ====================================================


.. _DocumentsTask-DocumentStatus:

================================= ====================================================================================================
Значение *Статуса документа*      Описание
================================= ====================================================================================================
..                                Любой статус
NotRead                           документ не прочитан
NoRecipientSignatureRequest       документ без запроса ответной подписи
WaitingForRecipientSignature      документ в ожидании ответной подписи
WithRecipientSignature            документ с ответной подписью
WithSenderSignature               документ с подписью отправителя
RecipientSignatureRequestRejected документ с отказом от формирования ответной подписи
WaitingForSenderSignature         документ, требующий подписания и отправки
InvalidSenderSignature            документ с невалидной подписью отправителя, требующий повторного подписания и отправки
InvalidRecipientSignature         документ с невалидной подписью получателя, требующий повторного подписания и отправки
Approved                          согласованный документ
Disapproved                       документ с отказом согласования
WaitingForResolution              документ, находящийся на согласовании или подписи
SignatureRequestRejected          документ с отказом в запросе подписи сотруднику
Finished                          документ с завершенным документооборотом
HaveToCreateReceipt               требуется подписать извещение о получении
NotFinished                       документ с незавершенным документооборотом
InvoiceAmendmentRequested         имеет смысл только для счетов-фактур; документ, по которому было запрошено уточнение
RevocationIsRequestedByMe         документ, по которому было запрошено аннулирование
RequestsMyRevocation              документ, по которому контрагент запросил аннулирование
RevocationAccepted                аннулированный документ
RevocationRejected                документ, запрос на аннулирование которого был отклонен
RevocationApproved                документ, запрос на аннулирование которого был согласован
RevocationDisapproved             документ с отказом согласования запроса на аннулирование
WaitingForRevocationApprovement   документ, находящийся на согласовании запроса аннулирования
NotRevoked                        неаннулированный документ
WaitingForProxySignature          документ в ожидании подписи промежуточного получателя
WithProxySignature                документ с подписью промежуточного получателя
InvalidProxySignature             документ с невалидной подписью промежуточного получателя, требующий повторного подписания и отправки
ProxySignatureRejected            документ с отказом от формирования подписи промежуточным получателем
WaitingForInvoiceReceipt          документ в ожидании получения извещения о получении счета-фактуры
WaitingForReceipt                 документ в ожидании получения извещения о получении
RequestsMySignature               документ, по которому контрагент запросил подпись
RoamingNotificationError          документ, с ошибкой доставки в роуминге
WithRecipientPartiallySignature   документ принят с разногласиями
================================= ====================================================================================================
